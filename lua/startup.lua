local motd = {
    {
        " _._     _,-'\"\"`-._",
        "(,-.`._,'(       |\\`-/|",
        "    `-.-' \\ )-`( , o o)",
        "          `-    \\`_`\"'-",
        size = { 25, 4 }
    },
    {
        "           __..--''``---....___   _..._    __",
        " /// //_.-'    .-/';  `        ``<._  ``.''_ `. / // /",
        "///_.-' _..--.'_    \\                    `( ) ) // //",
        "/ (_..-' // (< _     ;_..__               ; `' / ///",
        " / // // //  `-._,_)' // / ``--...____..-' /// / //",
        size = { 54, 5 }
    },
    {
        "          ,-.       _,---._ __  / \\",
        " /  )    .-'       `./ /   \\",
        "(  (   ,'            `/    /|",
        " \\  `-\"             \\'\\   / |",
        "  `.              ,  \\ \\ /  |",
        "   /`.          ,'-`----Y   |",
        "  (            ;        |   '",
        "  |  ,-.    ,-'         |  /",
        "  |  | (   |        hjw | /",
        "  )  |  \\  `.___________|/",
        "  `--'   `--'",
        size = { 36, 11 }
    },
    {
        "           .'\\   /`.",
        "         .'.-.`-'.-.`.",
        "    ..._:   .-. .-.   :_...",
        "  .'    '-.(o ) (o ).-'    `.",
        " :  _    _ _`~(_)~`_ _    _  :",
        ":  /:   ' .-=_   _=-. `   ;\\  :",
        ":   :|-.._  '     `  _..-|:   :",
        " :   `:| |`:-:-.-:-:'| |:'   :",
        "  `.   `.| | | | | | |.'   .'",
        "    `.   `-:_| | |_:-'   .'",
        " jgs  `-._   ````    _.-'",
        "          ``-------''",
        size = { 32, 12 }
    },
    {
        "        ..:..              ..:...      ",
        "        ^^:.^..^.        .^.::..~7      ",
        "       .!~ .:7  ^^ .::: ~! ^!:. :?^     ",
        "       ~~^ !.    :7. :!7^7.. .?. 7!     ",
        "       !^::^:     .      ~~  .^!.^!     ",
        "       ~:~:    ....    ..:^.  .^!~~     ",
        "        ~:.  .7??~..  ..^7!~:.  :7.     ",
        "        ..   7~.?&?    !J57~~   .:      ",
        "       .!:  :! 5P&Y    PYG&.?  :?:      ",
        "      .~:   .~:YBP: .. ~GBY^~   ~!:     ",
        "      :           ?5BGP~          ^.    ",
        "       :...    .:..!PY^..:.    .:^:     ",
        "         ^?^::............ ..:!^.       ",
        "            ....:::::::::::....         ",
        "                 .......                ",
    },
    {

        "                     ..^!!.          ",
        "                   :.  :.  ....      ",
        "                 ^:            ::    ",
        "               ::              .:7   ",
        "              ^       .^.  .^.  :^   ",
        "             ^       .        .^  ^  ",
        "            ~     . :.^   :::...  ^. ",
        "          . ..:^^^7!:     ..^!... ยบ  ",
        "    ..~^..^.~:            ^:         ",
        "  ~:       ^              !^         ",
        "  ?:::    :.   ..   .    .~          ",
        "    ..^^..!    !!.  !.. :?           ",
        "          ~  .^^~  ^  ~  ^           ",
        "          .: ^  ~..:   ^ ~           ",
        "                 ..            ",
        size={37,15}
    },
}

local function filter_by_size(max_height)
    local filtered = {}
    for img in ipairs(motd) do
        local value = motd[img]
        if value["size"][2] > max_height then
            table.insert(filtered, value)
        end
    end

    return filtered
end

local function write_motd()
    print("MeowOS_v0w0")
    local w, h = term.getSize()

    local valid_imgs = filter_by_size(h)
    local size = table.getn(valid_imgs)
    local idx = math.random(size)

    local chosen = valid_imgs[idx]
    for v in ipairs(chosen) do
        print(chosen[v]:sub(0, w))
    end
end

-- Add progs to PATH
shell.setPath(shell.path() .. ":/progs")

shell.setAlias("tmove", "go")

shell.run("clear")
write_motd()
